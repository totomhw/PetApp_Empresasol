@model Dictionary<string, int>

<div class="container py-4">
    <div class="text-center mb-4">
        <h1 class="display-5 fw-bold text-gradient">Panel de Gestión</h1>
        <p class="lead text-muted">
            Administra los recursos de la plataforma de forma intuitiva y eficiente.
        </p>
    </div>

    <div class="row justify-content-center mb-5">
        <div class="col-12 col-md-8 col-lg-6">
            <div class="card shadow-sm border-0">
                <div class="card-body text-center">
                    <h5 class="text-center fw-bold mb-4">Usuarios Registrados por Rol</h5>
                    <div class="d-flex justify-content-around align-items-center mb-4">
                        <div class="text-center">
                            <i class="fas fa-user-circle text-primary" style="font-size: 2rem;"></i>
                            <p class="text-muted small">Admin</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-paw text-success" style="font-size: 2rem;"></i>
                            <p class="text-muted small">Refugio</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-user text-warning" style="font-size: 2rem;"></i>
                            <p class="text-muted small">Cliente</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-briefcase text-info" style="font-size: 2rem;"></i>
                            <p class="text-muted small">Vendedor</p>
                        </div>
                    </div>
                    <canvas id="usersByRoleChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <hr class="thick-divider my-10">

    <div class="row g-3">
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-box-open text-primary icon-custom"></i>
                    <h6 class="card-title mt-2">Accesorios</h6>
                    <p class="text-muted small">Gestiona accesorios.</p>
                    <a class="btn btn-primary btn-sm mt-2" asp-area="" asp-controller="Accesorios" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-paw text-success icon-custom"></i>
                    <h6 class="card-title mt-2">Adopciones</h6>
                    <p class="text-muted small">Gestiona adopciones.</p>
                    <a class="btn btn-success btn-sm mt-2" asp-area="" asp-controller="Adopciones" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-shopping-cart text-info icon-custom"></i>
                    <h6 class="card-title mt-2">Tienda de Accesorios</h6>
                    <p class="text-muted small">Aqui puedes comprar tus accesorios.</p>
                    <a class="btn btn-info btn-sm mt-2" asp-area="" asp-controller="Accesorios" asp-action="ListadoAccesorios">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-shopping-bag text-danger icon-custom"></i>
                    <h6 class="card-title mt-2">Historial de Compras</h6>
                    <p class="text-muted small">Mira tus compras realizadas.</p>
                    <a class="btn btn-danger btn-sm mt-2" asp-area="" asp-controller="CarritoDeCompras" asp-action="HistorialCompras">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-hand-holding-heart text-primary icon-custom"></i>
                    <h6 class="card-title mt-2">Donaciones</h6>
                    <p class="text-muted small">Gestiona donaciones.</p>
                    <a class="btn btn-primary btn-sm mt-2" asp-area="" asp-controller="Donaciones" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-dog text-success icon-custom"></i>
                    <h6 class="card-title mt-2">Mascotas</h6>
                    <p class="text-muted small">Gestiona mascotas.</p>
                    <a class="btn btn-success btn-sm mt-2" asp-area="" asp-controller="Mascotas" asp-action="VistaMascota">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-user-shield text-info icon-custom"></i>
                    <h6 class="card-title mt-2">Roles</h6>
                    <p class="text-muted small">Gestiona roles.</p>
                    <a class="btn btn-info btn-sm mt-2" asp-area="" asp-controller="Roles" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-users text-success icon-custom"></i>
                    <h6 class="card-title mt-2">Usuarios</h6>
                    <p class="text-muted small">Gestiona usuarios.</p>
                    <a class="btn btn-success btn-sm mt-2" asp-area="" asp-controller="Usuarios" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
        <!-- Tarjetas restauradas -->
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-check-circle text-primary icon-custom"></i>
                    <h6 class="card-title mt-2">Validaciones de Pago</h6>
                    <p class="text-muted small">Revisa validaciones de pago.</p>
                    <a class="btn btn-primary btn-sm mt-2" asp-area="" asp-controller="Validaciones" asp-action="ValidacionesPago">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-file-alt text-info icon-custom"></i>
                    <h6 class="card-title mt-2">Verificar Solicitudes</h6>
                    <p class="text-muted small">Gestiona solicitudes de adopción.</p>
                    <a class="btn btn-info btn-sm mt-2" asp-area="" asp-controller="Refugios" asp-action="VerificarSolicitudes">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-plus-circle text-success icon-custom"></i>
                    <h6 class="card-title mt-2">Crear Mascotas</h6>
                    <p class="text-muted small">Añade nuevas mascotas.</p>
                    <a class="btn btn-success btn-sm mt-2" asp-area="" asp-controller="Mascotas" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
            <div class="card card-custom shadow card-hover-effect">
                <div class="card-body text-center">
                    <i class="fas fa-home text-secondary icon-custom"></i>
                    <h6 class="card-title mt-2">Refugios</h6>
                    <p class="text-muted small">Administra los refugios.</p>
                    <a class="btn btn-secondary btn-sm mt-2" asp-area="" asp-controller="Refugios" asp-action="Index">Ir</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #f8f9fa;
    }

    .text-gradient {
        background: linear-gradient(to right, #007bff, #0056b3);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .card-custom {
        background: #ffffff;
        border-radius: 0.75rem;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card-hover-effect {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

        .card-hover-effect:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

    .icon-custom {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .btn-sm {
        font-size: 0.85rem;
        padding: 0.4rem 1rem;
        border-radius: 0.5rem;
    }

    #usersByRoleChart {
        max-height: 300px;
    }

    .thick-divider {
        border: 10px;
        height: 6px;
        background: #000;
        color: #7A1E3D;
        background-color: #7A1E3D;
    }
</style>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const roles = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.UsuariosPorRol.Keys));
    const valores = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.UsuariosPorRol.Values));

    const ctx = document.getElementById('usersByRoleChart').getContext('2d');
    const usersByRoleChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: roles,
            datasets: [{
                label: 'Usuarios por Rol',
                data: valores,
                backgroundColor: ['#007bff', '#28a745', '#ffc107', '#17a2b8'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                },
                tooltip: {
                    callbacks: {
                        label: function (tooltipItem) {
                            return `${tooltipItem.label}: ${tooltipItem.raw} usuarios`;
                        }
                    }
                }
            }
        }
    });
</script>
